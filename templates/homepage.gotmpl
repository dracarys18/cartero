<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cartero</title>
    <link rel="icon" type="image/jpeg" href="/assets/favicon.jpg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #000;
            --bg-secondary: #111111;
            --text-primary: #dbdbdb;
            --text-secondary: #888;
            --border-color: #444;
            --border-light: #333;
            --hover-bg: #333;
            --max-width: 800px;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: "Source Code Pro", monospace;
            line-height: 1.6;
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 20px;
            font-size: 16px;
        }
        a {
            color: var(--text-primary);
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .header {
            border-bottom: 1px dashed var(--border-color);
            padding: 15px 0;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }
        .logo:hover {
            text-decoration: none;
        }
        .header-center {
            display: flex;
            gap: 15px;
        }
        .date-filter {
            display: flex;
            gap: 15px;
        }
        .filter-link {
            color: var(--text-secondary);
            font-size: 14px;
        }
        .filter-link.active {
            color: var(--text-primary);
            font-weight: 700;
        }
        .filter-link:hover {
            color: var(--text-primary);
        }
        .header-right {
            display: flex;
            align-items: center;
        }
        .social-icon {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            color: var(--text-secondary);
            font-size: 13px;
        }
        .social-icon svg {
            width: 16px;
            height: 16px;
            fill: var(--text-secondary);
        }
        .social-icon:hover {
            color: var(--text-primary);
            text-decoration: none;
        }
        .social-icon:hover svg {
            fill: var(--text-primary);
        }
        .content {
            margin: 30px 0;
        }
        .title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 25px;
            color: var(--text-secondary);
        }
        .story {
            padding: 20px 0;
            border-bottom: 1px dashed var(--border-light);
            position: relative;
            padding-left: 140px;
            min-height: 80px;
        }
        .story:last-child {
            border-bottom: none;
        }
        .story-image {
            position: absolute;
            left: 0;
            top: 20px;
            width: 130px;
            height: 75px;
            object-fit: contain;
            border-radius: 2px;
            border: 1px solid var(--border-light);
            background-color: var(--bg-secondary);
        }
        .story-image-placeholder {
            position: absolute;
            left: 0;
            top: 20px;
            width: 130px;
            height: 75px;
            border-radius: 2px;
            border: 1px solid var(--border-light);
            background-color: var(--bg-secondary);
            background-image: url('/assets/default-thumbnail.png');
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
        }
        .story-content {
            width: 100%;
        }
        .story-title {
            font-size: 18px;
            line-height: 1.4;
            margin-bottom: 8px;
            font-weight: 700;
        }
        .story-title a {
            color: var(--text-primary);
        }
        .story-title a:hover {
            color: var(--text-primary);
            text-decoration: underline;
        }
        .story-meta {
            font-size: 14px;
            color: var(--text-secondary);
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 8px;
        }
        .story-meta span {
            display: inline-block;
        }
        .source-tag {
            color: var(--text-primary);
            font-weight: 700;
        }
        .story-description {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 8px;
            line-height: 1.6;
        }
        .empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }
        .footer {
            border-top: 1px dashed var(--border-color);
            padding: 15px 0;
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: var(--text-secondary);
        }
        .footer-links {
            display: flex;
            gap: 15px;
        }
        .footer-link {
            color: var(--text-secondary);
            font-size: 13px;
        }
        .footer-link:hover {
            color: var(--text-primary);
        }
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 30px 0;
            padding: 20px 0;
            border-top: 1px dashed var(--border-light);
        }
        .pagination a {
            color: var(--text-primary);
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            border-radius: 2px;
        }
        .pagination a:hover {
            background-color: var(--hover-bg);
            text-decoration: none;
        }
        .pagination a.disabled {
            color: var(--text-secondary);
            pointer-events: none;
            border-color: var(--border-light);
        }
        .pagination .page-info {
            color: var(--text-secondary);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="header">
        <a href="/" class="logo">cartero</a>
        <div class="header-center">
            <div class="date-filter">
                <a href="/?date=today" class="filter-link{{if eq .DateRange "today"}} active{{end}}">today</a>
                <a href="/?date=yesterday" class="filter-link{{if eq .DateRange "yesterday"}} active{{end}}">yesterday</a>
            </div>
        </div>
        <div class="header-right">
            <a href="https://bsky.app/profile/news.karthihegde.dev" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Follow on Bluesky">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024">
                    <path d="M351.121 315.106C416.241 363.994 486.281 463.123 512 516.315C537.719 463.123 607.759 363.994 672.879 315.106C719.866 279.83 796 252.536 796 339.388C796 356.734 786.055 485.101 780.222 505.943C759.947 578.396 686.067 596.876 620.347 585.691C735.222 605.242 764.444 670.002 701.333 734.762C581.473 857.754 529.061 703.903 515.631 664.481C513.169 657.254 512.017 653.873 512 656.748C511.983 653.873 510.831 657.254 508.369 664.481C494.939 703.903 442.527 857.754 322.667 734.762C259.556 670.002 288.778 605.242 403.653 585.691C337.933 596.876 264.053 578.396 243.778 505.943C237.945 485.101 228 356.734 228 339.388C228 252.536 304.134 279.83 351.121 315.106Z"></path>
                </svg>
                <span>bluesky</span>
            </a>
        </div>
    </div>

    <div class="content">
        {{if .DateRange}}
        <div class="title">
            {{if eq .DateRange "yesterday"}}Yesterday's Stories{{else}}Latest Stories{{end}}
        </div>
        {{end}}

        {{if .Entries}}
            {{range .Entries}}
            <div class="story">
                {{if .ImageURL}}
                <img src="{{.ImageURL}}" alt="{{.Title}}" class="story-image" loading="lazy" onerror="this.src='/assets/default-thumbnail.png'">
                {{else}}
                <img src="/assets/default-thumbnail.png" alt="Placeholder" class="story-image-placeholder">
                {{end}}
                <div class="story-content">
                    <div class="story-title">
                        <a href="{{.Link}}" target="_blank" rel="noopener">{{.Title}}</a>
                    </div>
                    <div class="story-meta">
                        <span class="source-tag">[{{.Source}}]</span>
                        {{if .Author}}<span>by {{.Author}}</span>{{end}}
                        <span>{{timeAgo .CreatedAt}}</span>
                    </div>
                    {{if .Description}}
                    <div class="story-description">{{.Description}}</div>
                    {{end}}
                </div>
            </div>
            {{end}}

            {{if gt .TotalPages 1}}
            <div class="pagination">
                {{if .HasPrev}}
                <a href="/?date={{.DateRange}}&page={{sub .Page 1}}">← Previous</a>
                {{else}}
                <a class="disabled">← Previous</a>
                {{end}}
                
                <span class="page-info">Page {{.Page}} of {{.TotalPages}} ({{.Total}} stories)</span>
                
                {{if .HasNext}}
                <a href="/?date={{.DateRange}}&page={{add .Page 1}}">Next →</a>
                {{else}}
                <a class="disabled">Next →</a>
                {{end}}
            </div>
            {{end}}
        {{else}}
            <div class="empty">
                <p>No stories yet. Check back soon!</p>
            </div>
        {{end}}
    </div>

    <div class="footer">
        <div class="footer-links">
            <a href="/feed.rss" class="footer-link">rss</a>
            <a href="/feed.atom" class="footer-link">atom</a>
            <a href="/feed.json" class="footer-link">json</a>
        </div>
        <div>last updated: {{.Now.Format "Jan 2, 2006 15:04 MST"}}</div>
    </div>
</body>
</html>
